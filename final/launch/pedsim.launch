<launch>

<arg name="kbd_teleop" default="false"/>
<arg name="rqt_teleop" default="false"/>
<arg name="visualize" default="true"/>
<arg name="with_robot" default="false"/>
<arg name="scene_file" default="$(find pedsim_simulator)/scenarios/square/new_25_v1.xml"/>
<arg name="default_queue_size" default="10"/>
<arg name="enable_groups" default="true"/>
<arg name="simulation_factor" default="1.0"/> <!-- Speed up -->
<arg name="update_rate" default="25.0"/> <!-- Hz -->


<!-- Place gazebo frame at map frame -->
<node pkg="tf" type="static_transform_publisher" name="gazebo_map_broadcaster"
    args="-1 -1 0 0 0 0  odom gazebo 100"/>


<!-- this node spawn pedsim actors to gazebo once, then the plugin updates their pose -->  
<node pkg="pedsim_gazebo_plugin" type="spawn_pedsim_agents.py" name="spawn_pedsim_agents"  output="screen">
</node>

<!-- Simulator -->
<node name="pedsim_simulator" pkg="pedsim_simulator" type="pedsim_simulator" output="screen">
    <param name="scene_file" value="$(arg scene_file)" type="string"/>
    <param name="default_queue_size" value="$(arg default_queue_size)" type="int"/>
    <param name="with_robot" value="$(arg with_robot)"/>
    <param name="enable_groups" value="$(arg enable_groups)" type="bool"/>
    <param name="simulation_factor" value="$(arg simulation_factor)" type="double"/>
    <param name="update_rate" value="$(arg update_rate)" type="double"/>
    <param name="frame_id"  value="gazebo"/>
</node>


</launch>
